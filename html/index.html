<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width" />

    <title>Fetch json from data.stortinget.no example</title>

    <!-- <link rel="stylesheet" href="style.css" /> -->
  </head>

  <body>
    <h1>Fetch json from data.stortinget.no example</h1>

    <h2>Saksliste</h2>
    <pre id="saksliste"></pre>

    <h2>Sak 93583</h2>
    <pre id="sak"></pre>

    <script>
      fetch('https://proxy.klemespen.com:8080/https://data.stortinget.no/eksport/sak?sakid=93583&format=json')
        .then((response) => {
          if (!response.ok) {
            throw new Error(`HTTP error, status = ${response.status}`)
          }
          return response.json()
        })
        .then((data) => {
          console.log(JSON.stringify(data))
          document.getElementById('sak').innerHTML= JSON.stringify(data, false , 2)
        })
        .catch((error) => {
          const span = document.createElement("span")
          document.getElementById('sak').innerHTML= `Error: ${error.message}`
        })
      fetch('https://proxy.klemespen.com:8080/https://data.stortinget.no/eksport/saker?sesjonid=2022-2023&format=json')
        .then((response) => {
          if (!response.ok) {
            throw new Error(`HTTP error, status = ${response.status}`)
          }
          return response.json()
        })
        .then((data) => {
          console.log(JSON.stringify(data))
          document.getElementById('saksliste').innerHTML= JSON.stringify(data, false , 2)
        })
        .catch((error) => {
          const span = document.createElement("span")
          document.getElementById('saksliste').innerHTML= `Error: ${error.message}`
        })
    </script>
  </body>
</html>